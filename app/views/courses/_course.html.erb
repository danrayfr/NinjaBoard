<div id="<%= dom_id course %>">
  <div class="flex flex-col flex-[1_0_0%] bg-white border rounded-lg">
    <%- if course.image.present? %>
      <%= image_tag course.image, class: 'w-full rounded-t' %>
    <% else %>
      <%= image_tag "https://via.placeholder.com/380x120", class: "w-full h-auto sm:rounded-se-none" %>
    <% end %>

    <div class="p-4 flex-2 md:p-5">
      <div class="flex items-center justify-between font-bold text-xl mb-2">
          <h3 class="flex items-center justifytext-lg font-semibold text-gray-800 hover:text-green-700 text-left">
          <%= link_to course.title, course %>
        </h3>
          <% if user_unlocked_courses&.include? course.id %>
            <span class="ml-2 text-white text-xs px-2 py-1 rounded-full bg-paleFern">
              Unlocked
              <%= icon "fa-solid", "lock-open"%>
            </span>
          <% end %>
        </div>

      <div class="flex items-center p-4 border-t sm:px-5 gap-x-3">
        <span class="text-gray-500 text-xs">
          <%= pluralize course.impact, "Impact" %>
          <%= icon "fa-solid", "star" %>
        </span>
                
        <p class="text-xs text-gray-500 ml-auto">
          Added
          <%= time_tag course.created_at, "data-local": "time-ago" %>
        </p>
      </div>

      <div class="px-6 py-4 flex flex-col justify-between grow">
      <div>

        <p class="text-sm font-normal"><%= course.author.present? ? "Author: #{course.author}" : "" %><p>
        <div>
          <p class="text-sm font-light"><%= course.paid ? "Premium Content" : "Free" %></p>
        </div>
      </div>
      <% if user_started_courses&.include? course.id %>
        <% user_completed_percentage = user_course_progresses.find{ |cp| cp[:course_id] == course.id}[:completed_percentage] %>
        <div class="mt-2 h-4 relative rounded-full overflow-hidden">
          <div class="w-full h-full bg-gray-200 absolute"></div>
          <% if course_percentage(user_course_progresses, course) == 100 %>
            <div class="h-full bg-paleFern absolute text-white text-center text-xs" style="width:100%">Completed</div>
          <% else %>
            <div class="h-full bg-green-500 absolute text-white-50 text-center text-xs" style="width:<%= course_percentage(user_course_progresses, course) %>%"><%= course_percentage(user_course_progresses, course)%>%</div>
          <% end %>
        </div>
      <% end %>
    </div>
    </div>
  </div>
</div>

